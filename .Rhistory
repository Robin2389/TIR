plot(x,y)
source('~/.active-rstudio-document', echo=TRUE)
y <- 2:11
plot(x,y)
library(TIR)
packrat::set_opts(vcs.ignore.src = TRUE, use.cache = TRUE)
install.packages("Roxgen2")
library(TIR)
packrat::disable()
library(TIR)
source('~/SparkleShare/TIR/R/TIR.R', echo=TRUE)
packrat::init(options = list(vcs.ignore.src = TRUE))
install.packages("roxygen2")
library(TIR)
library("roxygen2")
install.packages("roxygen2")
source('~/SparkleShare/TIR/R/cptar.R', echo=TRUE)
source('~/SparkleShare/TIR/R/cptar.R', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
seted("/home/tian/Share300sdb/Landsat8/N1")
setwd("/home/tian/Share300sdb/Landsat8/N1")
untar()
untar("./L8_tars/")
source('~/SparkleShare/TIR/R/rs.untar.R', echo=TRUE)
source('~/SparkleShare/TIR/R/rs.cptar.R', echo=TRUE)
rs.untar(path"./L8_tars/")
rs.untar("./L8_tars/")
setwd("/home/tian/Share300sdb/Landsat8/N1")
rs.untar(path = "./L8_tars/")
setwd("/home/tian/Share300sdb/Landsat8/N1")
rs.untar(path = "./L8_tars/")
setwd("/home/tian/Share300sdb/Landsat8/N1/L8_tars/")
rs.untar()
phd.untarLandsat  <- function(path = ".", outdir = "../L8_tifs", pattern = ".tgz") {
tarFiles_v <- list.files(path = path, pattern = pattern, all.files = T, full.names = T)
sapply(tarFiles_v, function(i) {untar(tarfile = i, exdir = file.path(outdir,tools::file_path_sans_ext(basename(i))))})
}
phd.untarLandsat()
source('~/SparkleShare/TIR/R/rs.untar.R', echo=TRUE)
rs.untar()
tarFiles_v <- list.files(path = tarDir, pattern = tar, all.files = T, full.names = T)
tarFiles_v <- list.files(path = getwd(), pattern = "tar".tgz, all.files = T, full.names = T)
tarFiles_v <- list.files(path = getwd(), pattern = "tar".tgz, all.files = T, full.names = T)
tarFiles_v <- list.files(path = getwd(), pattern = .tgz, all.files = T, full.names = T)
tarFiles_v <- list.files(path = getwd(), pattern = ".tgz", all.files = T, full.names = T)
sapply(tarFiles_v, function(i) {untar(tarfile = i, exdir = file.path(tifDir,tools::file_path_sans_ext(basename(i))))})
sapply(tarFiles_v, function(i) {untar(tarfile = i, exdir = file.path(tools::file_path_sans_ext(basename(i))))})
sapply(tarFiles_v, function(i) {untar(tarfile = i, exdir = tools::file_path_sans_ext(basename(i)))})
list  <- readLines("list.txt")
rs.cptar(list = list, fromdir = getwd(), ourdir = "../copy")
dir.create("../copy")
rs.cptar(list = list, fromdir = getwd(), ourdir = "../copy")
rs.cptar(list = list, fromdir = getwd(), todir = "../copy")
list %in% getwd()
getwd()
dir(getwd())
list in getwd()
class(dir(getwd()))
class(list)
match(list,dir(getwd()))
intersect(list,dir(getwd()))
source('~/SparkleShare/TIR/R/rs.cptar.R', echo=TRUE)
source('~/SparkleShare/TIR/R/rs.cptar.R', echo=TRUE)
rs.cptar(list = list, fromdir = getwd(), todir = "../copy")
intersect(list,dir(getwd()))
match(list,dir(getwd()))
list %in% dir(getwd())
is.true(list %in% dir(getwd()))
all(list %in% dir(getwd()))
source('~/SparkleShare/TIR/R/rs.cptar.R', echo=TRUE)
rs.cptar(list = list, fromdir = getwd(), todir = "../copy")
source('~/SparkleShare/TIR/R/rs.cptar.R', echo=TRUE)
rs.cptar(list = list, fromdir = getwd(), todir = "../copy")
rs.untar()
rs.untar()
rs.cptar(list = list, fromdir = getwd(), todir = "../copy")
source('~/SparkleShare/TIR/R/rs.cptar.R', echo=TRUE)
rs.cptar(list = list, fromdir = getwd(), todir = "../copy")
rs.cptar(list = list, fromdir = getwd(), todir = "../copy")
dir()
for (i in list){
untar(tarfile = i, exdir = tools::file_path_sans_ext(basename(i)))
}
tools::file_path_sans_ext(basename(list))
for (i in list){
untar(tarfile = i, exdir = tools::file_path_sans_ext(basename(i)))
}
for (i in list){
untar(tarfile = i, exdir = file.path(tools::file_path_sans_ext(basename(i))))
}
todir = "../copy"
for (i in list){
untar(tarfile = i, exdir = file.path(todir,tools::file_path_sans_ext(basename(i))))
}
for (i in list){
untar(tarfile = i, exdir = file.path(todir,tools::file_path_sans_ext(basename(i))))
}
for (i in list){
untar(tarfile = i, exdir = file.path(todir,tools::file_path_sans_ext(basename(i))))
}
for (i in list){
untar(tarfile = i, exdir = paste0(todir,tools::file_path_sans_ext(basename(i))))
}
tools::file_path_sans_ext(basename(list))
for (i in c(list)){
untar(tarfile = i, exdir = paste0(todir,tools::file_path_sans_ext(basename(i))))
}
for (i in c(list)){
untar(tarfile = i, exdir = file.path(todir,tools::file_path_sans_ext(basename(i))))
}
sapply(list, function(i) {untar(tarfile = i, exdir = file.path(getwd(),tools::file_path_sans_ext(basename(i))))})
untar(tarfile = list[1], exdir = file.path(todir,tools::file_path_sans_ext(basename(list[1]))))
source('~/SparkleShare/TIR/R/rs.cptar.R', echo=TRUE)
rs.cptar(list = list, fromdir = getwd(), todir = "../copy")
source('~/SparkleShare/TIR/R/rs.cptar.R', echo=TRUE)
rs.cptar(list = list, fromdir = getwd(), todir = "../copy")
rs.cptar(list = list, fromdir = getwd(), todir = "/home/tian/Share300sdb/Landsat8/N1/L8_tars/copy")
rs.cptar(list = list, fromdir = getwd(), todir = "/home/tian/Share300sdb/Landsat8/N1/L8_tars/copy2")
tools::file_path_sans_ext(basename(list))
tarFiles_v <- list.files(path = tarDir, pattern = tar, all.files = T, full.names = T)
tarDir  <- "./L8_tars"
tifDir  <- "./L8_tifs"
tar  <- "*.tgz"
tarFiles_v <- list.files(path = tarDir, pattern = tar, all.files = T, full.names = T)
tools::file_path_sans_ext(basename(list))
for (i in c(list)){
untar(tarfile = list[1], exdir = file.path(todir,tools::file_path_sans_ext(basename(list[1]))))
}
for (i in c(list)){
untar(tarfile = i)
}
tools::file_path_sans_ext(basename(list))
setwd("/home/tian/Share300sdb/Landsat8/N1/L8_tars/")
sapply(dir(pattern = ".tgz"), function(i) {untar(tarfile = i, exdir = tools::file_path_sans_ext(basename(i)))})
dir(pattern = ".tgz")
sapply(dir(pattern = ".tgz"), function(i) {untar(tarfile = i, exdir = tools::file_path_sans_ext(basename(i)))})
sapply(dir(pattern = ".tgz"), function(i) untar(tarfile = i, exdir = file.path("./",tools::file_path_sans_ext(basename(i))))
sapply(dir(pattern = ".tgz"), function(i) untar(tarfile = i, exdir = file.path("./",tools::file_path_sans_ext(basename(i)))))
sapply(dir(pattern = ".tgz"), function(i) untar(tarfile = i, exdir = file.path("./",tools::file_path_sans_ext(basename(i)))))
sapply(dir(pattern = ".tgz"), function(i) untar(i, exdir = file.path("./",tools::file_path_sans_ext(basename(i)))))
dir(pattern = ".tgz")
sapply((pattern = ".tgz"), function(i) untar(i, exdir = file.path("./",tools::file_path_sans_ext(basename(i)))))
file.path(pattern = ".tgz")
file.link(pattern = ".tgz")
file.list(pattern = ".tgz")
list.files(pattern = ".tgz"
list.files(pattern = ".tgz")
sapply((pattern = ".tgz"), function(i) untar(i, exdir = file.path("./",tools::file_path_sans_ext(basename(i)))))
list.files(pattern = ".tgz")
tools::file_path_as_absolute(list.files(pattern = ".tgz"))
tools::file_path_as_absolute(list)
tools::file_path_as_absolute(list[1])
sapply((pattern = ".tgz"), function(i) untar(tools::file_path_as_absolute(i), exdir = file.path("./",tools::file_path_sans_ext(basename(i)))))
sapply((pattern = ".tgz"), function(i) untar(tarfile = tools::file_path_as_absolute(i), exdir = file.path("./",tools::file_path_sans_ext(basename(i)))))
sapply((pattern = ".tgz"), function(i) untar(tarfile = tools::file_path_as_absolute(i))
sapply((pattern = ".tgz"), function(i) untar(tarfile = tools::file_path_as_absolute(i)))
sapply((pattern = ".tgz"), function(i) untar(tarfile = tools::file_path_as_absolute(i)))
sapply((pattern = ".tgz"), function(i) {untar(tarfile = tools::file_path_as_absolute(i))})
sapply((pattern = ".tgz"), function(i) {untar(tarfile = i)
sapply((pattern = ".tgz"), function(i) {untar(tarfile = i)})
sapply((pattern = ".tgz"), untar())
sapply((pattern = ".tgz"), untar)
sapply(dir(pattern = ".tgz"), untar)
sapply(dir(pattern = ".tgz"), untar)
)
sapply(dir(pattern = ".tgz"), untar)
sapply(list.files(pattern = ".tgz"), untar)
sapply(list.files(pattern = ".tgz"), untar)
lapply(list.files(pattern = ".tgz"), untar)
file = list.files()
file = list.files(pattern = ".tgz")
lapply(file, untar)
sapply(file, untar)
file =tools::file_path_as_absolute(pattern = ".tgz")
for (i in list)
{
file  <-  tools::file_path_as_absolute(i)
untar(file)
}
untar(file)
workDir <- "~/Share300sdb/Landsat8/N1"
setwd(workDir)
Dirs  <- c("L8_tars", "L8_tifs", "L8_outs")
sapply(Dirs,dir.create)
tarDir  <- "./L8_tars"
tifDir  <- "./L8_tifs"
tar  <- "*.tgz"
tarFiles_v <- list.files(path = tarDir, pattern = tar, all.files = T, full.names = T)
sapply(list, function(i) {untar(tarfile = i, exdir = file.path(getwd(),tools::file_path_sans_ext(basename(i))))})
sapply(tarFiles_v, function(i) {untar(tarfile = i, exdir = file.path(outdir,tools::file_path_sans_ext(basename(i))))})
Sys.getenv("TAR"))
Sys.getenv("TAR")
untar("L8_tars/LC81050292013262LGN00.tgz")
untar("L8_tars/LC81050292013262LGN00)
)
""
untar("L8_tars/LC81050292013262LGN00")
untar("L8_tars/LC81050292013262LGN00")
untar("./L8_tars/LC81050292013262LGN00")
basename("./L8_tars/LC81050292013262LGN00.tgz")
sapply(tarFiles_v, function(i) {untar(tarfile = basename(i), exdir = file.path(outdir,tools::file_path_sans_ext(basename(i))))})
sapply(tarFiles_v, function(i) {untar(tarfile = basename(i), exdir = file.path(outdir,tools::file_path_sans_ext(basename(i))))})
untar(tools::file_path_as_absolute(list[1]))
setwd("/home/tian/Share300sdb/Landsat8/N1/L8_tars/")
untar(tools::file_path_as_absolute(list[1]))
x  <- untar(tools::file_path_as_absolute(list[1]))
setwd("~/Landsat/L8_Hokkaido/")
setwd("/home/tian/Share300sdb/Landsat8/N1/L8_tars/")
workDir  <- getwd()
tarDir  <- "./L8_tars/"
tifDir  <- "./L8_tifs"
tar.gz  <- "*.tgz"
tars_l  <- list.files(path = tarDir, pattern = tar.gz, all.files = T, full.names = T)
setwd("/home/tian/Share300sdb/Landsat8/N1/")
workDir  <- getwd()
tarDir  <- "./L8_tars/"
tifDir  <- "./L8_tifs"
tar.gz  <- "*.tgz"
```
### List all tarball files in the input folder: tarDir
```{r listTarballs}
tars_l  <- list.files(path = tarDir, pattern = tar.gz, all.files = T, full.names = T)
setwd("/home/tian/Share300sdb/Landsat8/N1/")
workDir  <- getwd()
tarDir  <- "./L8_tars/"
tifDir  <- "./L8_tifs"
tar.gz  <- "*.tgz"
tars_l  <- list.files(path = tarDir, pattern = tar.gz, all.files = T, full.names = T)
lapply(tars_l, function(i) {untar(tarfile = i, exdir = tifDir)})
lapply(tars_l, function(i) {untar(tarfile = i, exdir = tifDir)})
url <- 'http://archive.ics.uci.edu/ml/databases/tic/tic.tar.gz'
file <- basename(url)
download.file(url, file)
untar(file, compressed = 'gzip', exdir = tmpdir )
list.files(tmpdir)
url <- 'http://archive.ics.uci.edu/ml/databases/tic/tic.tar.gz'
file <- basename(url)
download.file(url, file)
ls()
dir()
untar(file, compressed = 'gzip', exdir = tmpdir )
list.files(tmpdir)
utils::untar(file, compressed = 'gzip', exdir = tmpdir )
tmpdir <- tempdir()
utils::untar(file, compressed = 'gzip', exdir = tmpdir )
list.files(tmpdir)
rs.cptar(list = list, fromdir = getwd(), todir = "/home/tian/Share300sdb/Landsat8/N1/L8_tars/copy2")
setwd("/home/tian/Share300sdb/Landsat8/N1/L8_tars/")
rs.cptar(list = list, fromdir = getwd(), todir = "/home/tian/Share300sdb/Landsat8/N1/L8_tars/copy2")
for (i in list)
{
file  <-  tools::file_path_as_absolute(i)
untar(file)
}
utils::untar(file, compressed = 'gzip', exdir = tmpdir )
setwd("~/Share300sdb/Landsat8/N1/L8_tars/")
sapply(tarFiles_v, function(i) {untar(tarfile = basename(i), exdir = file.path(outdir,tools::file_path_sans_ext(basename(i))))})
sapply(tarFiles_v, function(i) {utils::untar(tarfile = basename(i), exdir = file.path(outdir,tools::file_path_sans_ext(basename(i))))})
sapply(tarFiles_v, function(i) {utils::untar(tarfile = basename(i), exdir = file.path(".",tools::file_path_sans_ext(basename(i))))})
source('~/SparkleShare/TIR/R/rs.cptar.R', echo=TRUE)
rs.cptar(list = list, fromdir = getwd(), todir = "/home/tian/Share300sdb/Landsat8/N1/L8_tars/copy2")
rs.cptar(list = list, fromdir = getwd(), todir = "/home/tian/Share300sdb/Landsat8/N1/copy2")
library("tools", lib.loc="/usr/local/lib/R/library")
source('~/SparkleShare/TIR/R/rs.cptar.R', echo=TRUE)
source('~/SparkleShare/TIR/R/rs.cptar.R', echo=TRUE)
l8list_raw  <- read.table("~/Dropbox/2data/dataRaw/LANDSAT_8_36801_lst.csv", sep =",")
l8list_sub  <- l8list_raw[,c(3,4,5,16,20,21,22,36,37)]
l8list_sub[,4] <-  gsub( "/", "",l8list_sub[,4])
colnames(l8list_sub) <- l8list_sub[1,]
l8list_ord <- l8list_sub[order(l8list_sub[,2],l8list_sub[,3],l8list_sub[,5],l8list_sub[,4]),]
View(`l8list_ord`)
View(`l8list_ord`)
View(`l8list_sub`)
View(`l8list_raw`)
library("teamlucc")
install.packages(c("class", "cluster", "codetools", "KernSmooth", "MASS", "mgcv"), lib="/home/tian/SparkleShare/TIR/packrat/lib-R")
l8list_raw  <- read.table("~/Dropbox/2data/dataRaw/LANDSAT_8_36801_lst.csv", sep =",")
l8list_sub  <- l8list_raw[,c(3,4,5,16,20,21,22,36,37)]
View(`l8list_sub`)
View(`l8list_sub`)
colnames(l8list_sub) <- l8list_sub[1,]
View(`l8list_sub`)
col.names(l8list_sub) <- l8list_sub[1,]
names(l8list_sub) <- l8list_sub[1,]
View(`l8list_sub`)
l8list_raw  <- read.table("~/Dropbox/2data/dataRaw/LANDSAT_8_36801_lst.csv", sep =",")
l8list_sub  <- l8list_raw[,c(3,4,5,16,20,21,22,36,37)]
names(l8list_sub)
names(l8list_sub) <- l8list_sub[1,]
View(`l8list_sub`)
l8list_sub[1,]
l8list_sub[,4] <-  gsub( "/", "",l8list_sub[,4]))
names(l8list_sub) <-  as.character(l8list_sub[1,])
View(`l8list_sub`)
names(l8list_sub) <-  as.character(l8list_sub[1,])
names(l8list_sub) <-  as.character(l8list_sub[1,])
l8list_sub[,4] <-  gsub( "/", "",l8list_sub[,4]))
as.character(l8list_sub[1,])
as.character(l8list_sub[2,])
l8list_sub  <- l8list_raw[,c(3,4,5,16,20,21,22,36,37)]
as.character(l8list_sub[2,])
as.character(l8list_sub[0,])
as.character(l8list_sub[1])
l8list_sub
col.names(l8list_sub) <-
col.names(l8list_sub)
col.names(l8list_sub)
View(`l8list_sub`)
install.packages("teamlucc")
library(devtools)
install_github('azvoleff/teamlucc')
library(devtools)
install_github('azvoleff/teamlucc')
library(devtools)
install_github('azvoleff/teamlucc')
install.packages("Rcurl")
install.packages("RCurl")
library(teamlucc)
library(devtools)
install_github('azvoleff/teamlucc')
install.packages('devtools')
install.packages('devtools')
library(devtools)
install_github('azvoleff/teamlucc')
packrat::disable()
library("teamlucc")
library("teamlucc")
library("teamlucc")
ee_read <- function(x) {
scenes <- read.csv(x, stringsAsFactors=FALSE, quote=,
na.strings=c(NA,  ))
scenes$Sensor <- substr(scenes$Landsat.Scene.Identifier, 1, 3)
scenes$Sensor <- factor(scenes$Sensor)
yr_first <- grepl(^[0-9]{4}/, scenes$Date.Acquired)
yr_last <- grepl(/[0-9]{4}$, scenes$Date.Acquired)
if ((sum(yr_first) + sum(yr_last)) < nrow(scenes)) {
stop(unrecognized date format in Date.Acquired column)
}
acq_date <- as.Date(scenes$Date.Acquired)
acq_date[yr_first] <- as.Date(scenes$Date.Acquired[yr_first], %Y/%m/%d)
acq_date[yr_last] <- as.Date(scenes$Date.Acquired[yr_last], %m/%d/%Y)
scenes$Date.Acquired <- acq_date
scenes$Year <- as.numeric(format(scenes$Date.Acquired, %Y))
scenes$Month <- as.numeric(format(scenes$Date.Acquired, %m)) - .5
scenes$MonthFactor <- factor(format(scenes$Date.Acquired, %m))
scenes$Path_Row <- factor(paste(scenes$WRS.Path, scenes$WRS.Row, sep=/))
scenes$YearMonth <- paste(scenes$Year, scenes$MonthFactor, sep=/)
scenes$Frac_Clear <- (100 - scenes$Cloud.Cover) / 100
scenes <- scenes[order(scenes$WRS.Path, scenes$WRS.Row), ]
if (nrow(scenes) == 0) {
stop(paste0(no data found in, x,
- is scenes an EarthExplorer CSV export?))
}
scenes <- scenes[scenes$Data.Category == NOMINAL, ]
return(scenes)
}
ee_read <- function(x) {
scenes <- read.csv(x, stringsAsFactors=FALSE, quote=,
na.strings=c(NA,  ))
scenes$Sensor <- substr(scenes$Landsat.Scene.Identifier, 1, 3)
scenes$Sensor <- factor(scenes$Sensor)
yr_first <- grepl(^[0-9]{4}/, scenes$Date.Acquired)
yr_last <- grepl(/[0-9]{4}$, scenes$Date.Acquired)
if ((sum(yr_first) + sum(yr_last)) < nrow(scenes)) {
stop(unrecognized date format in Date.Acquired column)
}
acq_date <- as.Date(scenes$Date.Acquired)
acq_date[yr_first] <- as.Date(scenes$Date.Acquired[yr_first], %Y/%m/%d)
acq_date[yr_last] <- as.Date(scenes$Date.Acquired[yr_last], %m/%d/%Y)
scenes$Date.Acquired <- acq_date
scenes$Year <- as.numeric(format(scenes$Date.Acquired, %Y))
scenes$Month <- as.numeric(format(scenes$Date.Acquired, %m)) - .5
scenes$MonthFactor <- factor(format(scenes$Date.Acquired, %m))
scenes$Path_Row <- factor(paste(scenes$WRS.Path, scenes$WRS.Row, sep=/))
scenes$YearMonth <- paste(scenes$Year, scenes$MonthFactor, sep=/)
scenes$Frac_Clear <- (100 - scenes$Cloud.Cover) / 100
scenes <- scenes[order(scenes$WRS.Path, scenes$WRS.Row), ]
if (nrow(scenes) == 0) {
stop(paste0(no data found in, x,
- is scenes an EarthExplorer CSV export?))
}
scenes <- scenes[scenes$Data.Category == NOMINAL, ]
return(scenes)
}
ee_read <- function(x) {
scenes <- read.csv(x, stringsAsFactors=FALSE, quote=,
na.strings=c(NA,  ))
scenes$Sensor <- substr(scenes$Landsat.Scene.Identifier, 1, 3)
scenes$Sensor <- factor(scenes$Sensor)
yr_first <- grepl(^[0-9]{4}/, scenes$Date.Acquired)
yr_last <- grepl(/[0-9]{4}$, scenes$Date.Acquired)
if ((sum(yr_first) + sum(yr_last)) < nrow(scenes)) {
stop(unrecognized date format in Date.Acquired column)
}
acq_date <- as.Date(scenes$Date.Acquired)
library(teamlucc)
library(devtools)
ls
h = 6.626*10^-34
h
h = 6.626*10^-34
c = 2.998*10^8
j = 1.38*10^-23
a = hc/j
a = h*c/j
a
hkdmaskb  <- readRDS("~/SparkleShare/TIR/hkdmskb_grdi2d1h.Rds")
plot(hkdmaskbmaskb)
plot(hkdmaskb)
sp::plot(hkdmaskb)
